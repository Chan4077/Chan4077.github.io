<!DOCTYPE html>
<html lang="en"><head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="theme-color" content="#3948ab">
  <meta name="google-site-verification" content="vUIz5bcO8VS4oqWX-A9VBtLKrqwl5ZrnbuUw4serhEU" /><meta name="description" content="My personal Github pages website.">
  
  
  <link rel="stylesheet" href="/css/site.css">
  <link rel="canonical" href="https://chan4077.github.io/node_modules/focus-trap/">
  <link rel="alternate" type="application/rss+xml" title="Chan4077.GitHub.io" href="https://chan4077.github.io/feed.xml">
  <link rel="manifest" href="/manifest.json"><link href='https://fonts.googleapis.com/css?family=Material+Icons+Outlined|Roboto+Condensed:400,300,700|Roboto:300,400,500|Roboto+Mono:300'
    rel='stylesheet' type='text/css' />
  <!-- Begin Jekyll SEO tag v2.5.0 -->
<title>focus-trap | Chan4077.GitHub.io</title>
<meta name="generator" content="Jekyll v3.7.4" />
<meta property="og:title" content="focus-trap" />
<meta property="og:locale" content="en_US" />
<meta name="description" content="My personal Github pages website." />
<meta property="og:description" content="My personal Github pages website." />
<link rel="canonical" href="https://chan4077.github.io/node_modules/focus-trap/" />
<meta property="og:url" content="https://chan4077.github.io/node_modules/focus-trap/" />
<meta property="og:site_name" content="Chan4077.GitHub.io" />
<script type="application/ld+json">
{"description":"My personal Github pages website.","@type":"WebPage","headline":"focus-trap","url":"https://chan4077.github.io/node_modules/focus-trap/","@context":"http://schema.org"}</script>
<!-- End Jekyll SEO tag -->

</head>


  <body class="mdc-typography"><aside class="mdc-drawer mdc-drawer--modal" id="app-drawer">
  <!-- <div class="mdc-drawer__header">
    <h3 class="mdc-drawer__title">Mail</h3>
    <h6 class="mdc-drawer__subtitle">email@material.io</h6>
  </div> -->
  <div class="mdc-drawer__content">
    <nav class="mdc-list">
      <h6 class="mdc-list-group__subheader">Links</h6>
      <a class="mdc-list-item" href="/" aria-selected="true" data-mdc-auto-init="MDCRipple" id="home-list-item">
        <span class="material-icons-outlined mdc-list-item__graphic" aria-hidden="true">home</span>
        <span class="mdc-list-item__text">Home</span>
      </a>
      <a class="mdc-list-item" href="/blog" data-mdc-auto-init="MDCRipple" id="blog-list-item">
        <!-- See https://materialdesignicons.com/icon/book-open-page-variant -->
        <svg class="mdc-list-item__graphic" aria-hidden="true" width="24" height="24" viewBox="0 0 24 24">
          <path d="M19,2L14,6.5V17.5L19,13V2M6.5,5C4.55,5 2.45,5.4 1,6.5V21.16C1,21.41 1.25,21.66 1.5,21.66C1.6,21.66 1.65,21.59 1.75,21.59C3.1,20.94 5.05,20.5 6.5,20.5C8.45,20.5 10.55,20.9 12,22C13.35,21.15 15.8,20.5 17.5,20.5C19.15,20.5 20.85,20.81 22.25,21.56C22.35,21.61 22.4,21.59 22.5,21.59C22.75,21.59 23,21.34 23,21.09V6.5C22.4,6.05 21.75,5.75 21,5.5V7.5L21,13V19C19.9,18.65 18.7,18.5 17.5,18.5C15.8,18.5 13.35,19.15 12,20V13L12,8.5V6.5C10.55,5.4 8.45,5 6.5,5V5Z" />
        </svg>
        <span class="mdc-list-item__text">Blog</span>
      </a>
      <a href="/til" class="mdc-list-item" data-mdc-auto-init="MDCRipple" id="til-list-item">
        <svg class="mdc-list-item__graphic" aria-hidden="true" width="24" height="24" viewBox="0 0 24 24">
          <path d="M20,11H23V13H20V11M1,11H4V13H1V11M13,1V4H11V1H13M4.92,3.5L7.05,5.64L5.63,7.05L3.5,4.93L4.92,3.5M16.95,5.63L19.07,3.5L20.5,4.93L18.37,7.05L16.95,5.63M12,6A6,6 0 0,1 18,12C18,14.22 16.79,16.16 15,17.2V19A1,1 0 0,1 14,20H10A1,1 0 0,1 9,19V17.2C7.21,16.16 6,14.22 6,12A6,6 0 0,1 12,6M14,21V22A1,1 0 0,1 13,23H11A1,1 0 0,1 10,22V21H14M11,18H13V15.87C14.73,15.43 16,13.86 16,12A4,4 0 0,0 12,8A4,4 0 0,0 8,12C8,13.86 9.27,15.43 11,15.87V18Z" />
        </svg>
        <span class="mdc-list-item__text">Today I Learned (TIL)</span>
      </a>
      <a class="mdc-list-item" href="/about" data-mdc-auto-init="MDCRipple" id="about-list-item">
        <span class="material-icons-outlined mdc-list-item__graphic" aria-hidden="true">info</span>
        <span class="mdc-list-item__text">About</span>
      </a>
      <a href="/projects" class="mdc-list-item" data-mdc-auto-init="MDCRipple" id="projects-list-item">
        <!-- See https://materialdesignicons.com/icon/flask -->
        <svg class="mdc-list-item__graphic" aria-hidden="true">
          <path d="M6,22A3,3 0 0,1 3,19C3,18.4 3.18,17.84 3.5,17.37L9,7.81V6A1,1 0 0,1 8,5V4A2,2 0 0,1 10,2H14A2,2 0 0,1 16,4V5A1,1 0 0,1 15,6V7.81L20.5,17.37C20.82,17.84 21,18.4 21,19A3,3 0 0,1 18,22H6M5,19A1,1 0 0,0 6,20H18A1,1 0 0,0 19,19C19,18.79 18.93,18.59 18.82,18.43L16.53,14.47L14,17L8.93,11.93L5.18,18.43C5.07,18.59 5,18.79 5,19M13,10A1,1 0 0,0 12,11A1,1 0 0,0 13,12A1,1 0 0,0 14,11A1,1 0 0,0 13,10Z" />
        </svg>
        <span class="mdc-list-item__text">Projects</span>
      </a>
      <a href="/privacy-policy" class="mdc-list-item" data-mdc-auto-init="MDCRipple" id="privacy-policy-list-item">
        <span class="material-icons-outlined mdc-list-item__graphic" aria-hidden="true">lock</span>
        <span class="mdc-list-item__text">Privacy policy</span>
      </a>
      <hr class="mdc-list-divider">
      <a href="https://github.com/Chan4077/chan4077.github.io" class="mdc-list-item" data-mdc-auto-init="MDCRipple" id="source-code-list-item">
        <span class="material-icons-outlined mdc-list-item__graphic" aria-hidden="true">code</span>
        <span class="mdc-list-item__text">View source code</span>
      </a>
    </nav>
  </div>
</aside>
<div class="mdc-drawer-scrim"></div>
<header class="mdc-top-app-bar mdc-top-app-bar--fixed" id="app-bar">
  <div class="mdc-top-app-bar__row">
    <section class="mdc-top-app-bar__section mdc-top-app-bar__section--align-start">
      <button role="button" class="material-icons-outlined mdc-top-app-bar__navigation-icon">menu</button>
      <span class="mdc-top-app-bar__title">focus-trap</span>
    </section>

    <section class="mdc-top-app-bar__section mdc-top-app-bar__section--align-end mdc-typography" role="toolbar"><button id="print-btn" class="material-icons-outlined mdc-top-app-bar__action-item" aria-label="Print this page" title="Print this page">print</button>
    </section>
  </div>
</header>
<main class="mdc-top-app-bar--fixed-adjust" id="page-content">
      <div class="mdc-layout-grid">
  <div class="mdc-layout-grid__inner mdc-typography">
    <div class="mdc-layout-grid__cell mdc-layout-grid__cell--span-12">
      <h1 class="mdc-typography--headline2">focus-trap</h1>
      <div class="page">
        <h1 id="focus-trap">focus-trap</h1>

<p>Trap focus within a DOM node.</p>

<p>There may come a time when you find it important to trap focus within a DOM node — so that when a user hits <code class="highlighter-rouge">Tab</code> or <code class="highlighter-rouge">Shift+Tab</code> or clicks around, she can’t escape a certain cycle of focusable elements.</p>

<p>You will definitely face this challenge when you are trying to build <strong>accessible modals</strong>.</p>

<p>This module is a little, modular <strong>vanilla JS</strong> solution to that problem.</p>

<p>Use it in your higher-level components. For example, if you are using React check out <a href="https://github.com/davidtheclark/focus-trap-react">focus-trap-react</a>, a light wrapper around this library. If you are not a React user, consider creating light wrappers in your framework-of-choice.</p>

<h2 id="what-it-does">What it does</h2>

<p>When a focus trap is activated, this is what should happen:</p>

<ul>
  <li>Some element within the focus trap receives focus. By default, this will be the first element in the focus trap’s tab order (as determined by <a href="https://github.com/davidtheclark/tabbable">tabbable</a>). Alternately, you can specify an element that should receive this initial focus.</li>
  <li>The <code class="highlighter-rouge">Tab</code> and <code class="highlighter-rouge">Shift+Tab</code> keys will cycle through the focus trap’s tabbable elements <em>but will not leave the focus trap</em>.</li>
  <li>Clicks within the focus trap behave normally; but clicks <em>outside</em> the focus trap are blocked.</li>
  <li>The <code class="highlighter-rouge">Escape</code> key will deactivate the focus trap.</li>
</ul>

<p>When the focus trap is deactivated, this is what should happen:</p>

<ul>
  <li>Focus is passed to <em>whichever element had focus when the trap was activated</em> (e.g. the button that opened the modal or menu).</li>
  <li>Tabbing and clicking behave normally everywhere.</li>
</ul>

<p><a href="http://davidtheclark.github.io/focus-trap/demo/">Check out the demos.</a></p>

<p>For more advanced usage (e.g. focus traps within focus traps), you can also pause a focus trap’s behavior without deactivating it entirely, then unpause at will.</p>

<h2 id="installation">Installation</h2>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>npm install focus-trap
</code></pre></div></div>

<p>You can also use a UMD version published to <code class="highlighter-rouge">unpkg.com</code> as <code class="highlighter-rouge">dist/focus-trap.js</code> and <code class="highlighter-rouge">dist/focus-trap.min.js</code>.</p>

<h2 id="browser-support">Browser Support</h2>

<p>IE9+</p>

<p>Why?
Because this module uses <a href="document.createElement('button')"><code class="highlighter-rouge">EventTarget.addEventListener()</code></a>.
And its only dependency, tabbable, uses <a href="https://github.com/davidtheclark/tabbable#browser-support">a couple of IE9+ functions</a>.</p>

<h2 id="usage">Usage</h2>

<h3 id="focustrap--createfocustrapelement-createoptions">focusTrap = createFocusTrap(element[, createOptions]);</h3>

<p>Returns a new focus trap on <code class="highlighter-rouge">element</code>.</p>

<p><code class="highlighter-rouge">element</code> can be</p>
<ul>
  <li>a DOM node (the focus trap itself) or</li>
  <li>a selector string (which will be pass to <code class="highlighter-rouge">document.querySelector()</code> to find the DOM node).</li>
</ul>

<p><code class="highlighter-rouge">createOptions</code>:</p>

<ul>
  <li><strong>onActivate</strong> {function}: A function that will be called when the focus trap activates.</li>
  <li><strong>onDeactivate</strong> {function}: A function that will be called when the focus trap deactivates,</li>
  <li>
    <table>
      <tbody>
        <tr>
          <td><strong>initialFocus</strong> {element</td>
          <td>string</td>
          <td>function}: By default, when a focus trap is activated the first element in the focus trap’s tab order will receive focus. With this option you can specify a different element to receive that initial focus. Can be a DOM node, or a selector string (which will be passed to <code class="highlighter-rouge">document.querySelector()</code> to find the DOM node), or a function that returns a DOM node.</td>
        </tr>
      </tbody>
    </table>
  </li>
  <li>
    <table>
      <tbody>
        <tr>
          <td><strong>fallbackFocus</strong> {element</td>
          <td>string</td>
          <td>function}: By default, an error will be thrown if the focus trap contains no elements in its tab order. With this option you can specify a fallback element to programmatically receive focus if no other tabbable elements are found. For example, you may want a popover’s <code class="highlighter-rouge">&lt;div&gt;</code> to receive focus if the popover’s content includes no tabbable elements. <em>Make sure the fallback element has a negative <code class="highlighter-rouge">tabindex</code> so it can be programmatically focused.</em> The option value can be a DOM node, a selector string (which will be passed to <code class="highlighter-rouge">document.querySelector()</code> to find the DOM node), or  a function that returns a DOM node.</td>
        </tr>
      </tbody>
    </table>
  </li>
  <li><strong>escapeDeactivates</strong> {boolean}: Default: <code class="highlighter-rouge">true</code>. If <code class="highlighter-rouge">false</code>, the <code class="highlighter-rouge">Escape</code> key will not trigger deactivation of the focus trap. This can be useful if you want to force the user to make a decision instead of allowing an easy way out.</li>
  <li><strong>clickOutsideDeactivates</strong> {boolean}: Default: <code class="highlighter-rouge">false</code>. If <code class="highlighter-rouge">true</code>, a click outside the focus trap will deactivate the focus trap and allow the click event to do its thing.</li>
  <li><strong>returnFocusOnDeactivate</strong> {boolean}: Default: <code class="highlighter-rouge">true</code>. If <code class="highlighter-rouge">false</code>, when the trap is deactivated, focus will <em>not</em> return to the element that had focus before activation.</li>
</ul>

<h3 id="focustrapactivateactivateoptions">focusTrap.activate([activateOptions])</h3>

<p>Activates the focus trap, adding various event listeners to the document.</p>

<p>If focus is already within it the trap, it remains unaffected. Otherwise, focus-trap will try to focus the following nodes, in order:</p>

<ul>
  <li><code class="highlighter-rouge">createOptions.initialFocus</code></li>
  <li>The first tabbable node in the trap</li>
  <li><code class="highlighter-rouge">createOptions.fallbackFocus</code></li>
</ul>

<p>If none of the above exist, an error will be thrown. You cannot have a focus trap that lacks focus.</p>

<p>Returns the <code class="highlighter-rouge">focusTrap</code>.</p>

<p><code class="highlighter-rouge">activateOptions</code>:</p>

<p>These options are used to override the focus trap’s default behavior for this particular activation.</p>

<ul>
  <li>
    <table>
      <tbody>
        <tr>
          <td><strong>onActivate</strong> {function</td>
          <td>null</td>
          <td>false}: Default: whatever you chose for <code class="highlighter-rouge">createOptions.onActivate</code>. <code class="highlighter-rouge">null</code> or <code class="highlighter-rouge">false</code> are the equivalent of a <code class="highlighter-rouge">noop</code>.</td>
        </tr>
      </tbody>
    </table>
  </li>
</ul>

<h3 id="focustrapdeactivatedeactivateoptions">focusTrap.deactivate([deactivateOptions])</h3>

<p>Deactivates the focus trap.</p>

<p>Returns the <code class="highlighter-rouge">focusTrap</code>.</p>

<p><code class="highlighter-rouge">deactivateOptions</code>:</p>

<p>These options are used to override the focus trap’s default behavior for this particular deactivation.</p>

<ul>
  <li><strong>returnFocus</strong> {boolean}: Default: whatever you chose for <code class="highlighter-rouge">createOptions.returnFocusOnDeactivate</code>.</li>
  <li>
    <table>
      <tbody>
        <tr>
          <td><strong>onDeactivate</strong> {function</td>
          <td>null</td>
          <td>false}: Default: whatever you chose for <code class="highlighter-rouge">createOptions.onDeactivate</code>. <code class="highlighter-rouge">null</code> or <code class="highlighter-rouge">false</code> are the equivalent of a <code class="highlighter-rouge">noop</code>.</td>
        </tr>
      </tbody>
    </table>
  </li>
</ul>

<h3 id="focustrappause">focusTrap.pause()</h3>

<p>Pause an active focus trap’s event listening without deactivating the trap.</p>

<p>If the focus trap has not been activated, nothing happens.</p>

<p>Returns the <code class="highlighter-rouge">focusTrap</code>.</p>

<p>Any <code class="highlighter-rouge">onDeactivate</code> callback will not be called, and focus will not return to the element that was focused before the trap’s activation. But the trap’s behavior will be paused.</p>

<p>This is useful in various cases, one of which is when you want one focus trap within another. <code class="highlighter-rouge">demo-six</code> exemplifies how you can implement this.</p>

<h3 id="focustrapunpause">focusTrap.unpause()</h3>

<p>Unpause an active focus trap. (See <code class="highlighter-rouge">pause()</code>, above.)</p>

<p>Focus is forced into the trap just as described for <code class="highlighter-rouge">focusTrap.activate()</code>.</p>

<p>If the focus trap has not been activated or has not been paused, nothing happens.</p>

<p>Returns the <code class="highlighter-rouge">focusTrap</code>.</p>

<h2 id="examples">Examples</h2>

<p>Read code in <code class="highlighter-rouge">demo/</code> and <a href="http://davidtheclark.github.io/focus-trap/demo/">see how it works</a>.</p>

<p>Here’s what happens in <code class="highlighter-rouge">demo-one.js</code>:</p>

<div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">var</span> <span class="nx">createFocusTrap</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">'../../'</span><span class="p">);</span>

<span class="kd">var</span> <span class="nx">containerOne</span> <span class="o">=</span> <span class="nb">document</span><span class="p">.</span><span class="nx">getElementById</span><span class="p">(</span><span class="s1">'demo-one'</span><span class="p">);</span>
<span class="kd">var</span> <span class="nx">focusTrapOne</span> <span class="o">=</span> <span class="nx">createFocusTrap</span><span class="p">(</span><span class="s1">'#demo-one'</span><span class="p">,</span> <span class="p">{</span>
  <span class="na">onDeactivate</span><span class="p">:</span> <span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
    <span class="nx">containerOne</span><span class="p">.</span><span class="nx">className</span> <span class="o">=</span> <span class="s1">'trap'</span><span class="p">;</span>
  <span class="p">},</span>
<span class="p">});</span>

<span class="nb">document</span><span class="p">.</span><span class="nx">getElementById</span><span class="p">(</span><span class="s1">'activate-one'</span><span class="p">).</span><span class="nx">addEventListener</span><span class="p">(</span><span class="s1">'click'</span><span class="p">,</span> <span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
  <span class="nx">focusTrapOne</span><span class="p">.</span><span class="nx">activate</span><span class="p">();</span>
  <span class="nx">containerOne</span><span class="p">.</span><span class="nx">className</span> <span class="o">=</span> <span class="s1">'trap is-active'</span><span class="p">;</span>
<span class="p">});</span>

<span class="nb">document</span><span class="p">.</span><span class="nx">getElementById</span><span class="p">(</span><span class="s1">'deactivate-one'</span><span class="p">).</span><span class="nx">addEventListener</span><span class="p">(</span><span class="s1">'click'</span><span class="p">,</span> <span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
  <span class="nx">focusTrapOne</span><span class="p">.</span><span class="nx">deactivate</span><span class="p">();</span>
<span class="p">});</span>
</code></pre></div></div>

<h2 id="other-details">Other details</h2>

<h3 id="one-at-a-time">One at a time</h3>

<p><em>Only one focus trap can be listening at a time.</em> If a second focus trap is activated the first will automatically pause. The first trap is unpaused and again traps focus when the second is deactivated.</p>

<p>Focus trap manages a queue of traps: if A activates; then B activates, pausing A; then C activates, pausing B; when C then deactivates, B is unpaused; and when B then deactivates, A is unpaused.</p>

<h3 id="use-predictable-elements-for-the-first-and-last-tabbable-elements-in-your-trap">Use predictable elements for the first and last tabbable elements in your trap</h3>

<p>The focus trap will work best if the <em>first</em> and <em>last</em> focusable elements in your trap are simple elements that all browsers treat the same, like buttons and inputs.**</p>

<p>Tabbing will work as expected with trickier, less predictable elements — like iframes, shadow trees, audio and video elements, etc. — as long as they are <em>between</em> more predictable elements (that is, if they are not the first or last tabbable element in the trap).</p>

<p>This limitation is ultimately rooted in browser inconsistencies and inadequacies, but it comes to focus-trap through its dependency <a href="https://github.com/davidtheclark/tabbable">Tabbable</a>. You can read about more details <a href="https://github.com/davidtheclark/tabbable#more-details">in the Tabbable documentation</a>.</p>

<h3 id="your-trap-should-include-a-tabbable-element-or-a-focusable-container">Your trap should include a tabbable element or a focusable container</h3>

<p>You can’t have a focus trap without focus, so an error will be thrown if you try to initialize focus-trap with an element that contains no tabbable nodes.</p>

<p>If you find yourself in this situation, you should give you container <code class="highlighter-rouge">tabindex="-1"</code> and set it as <code class="highlighter-rouge">initialFocus</code> or <code class="highlighter-rouge">fallbackFocus</code>. A couple of demos illustrate this.</p>

<h2 id="development">Development</h2>

<p>Because of the nature of the functionality, involving keyboard and click and (especially) focus events, JavaScript unit tests didn’t make sense. (If you disagree and can help out, please PR!) So the demo is also the test: run it in browsers and see how it works, checking the documented requirements.</p>

      </div>
    </div>
  </div>
</div>

    </main><div class="mdc-snackbar" id="update-available-snackbar">
  <div class="mdc-snackbar__surface">
    <div class="mdc-snackbar__label"
         role="status"
         aria-live="polite">
      An update is available!
    </div>
    <div class="mdc-snackbar__actions">
      <button type="button" class="mdc-button mdc-snackbar__action" data-mdc-auto-init="MDCRipple">Update</button>
      <button class="mdc-icon-button mdc-snackbar__dismiss material-icons-outlined" title="Dismiss" data-mdc-auto-init="MDCRipple">close</button>
    </div>
  </div>
</div>
</body><script src="/node_modules/material-components-web/dist/material-components-web.min.js"></script>
<script src="/js/site.js"></script>
<!-- Google Analytics -->
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');
  
  ga('create', 'UA-82448435-1', 'auto');
  ga('send', 'pageview');
</script>
<!-- End Google Analytics -->
<!-- Workbox initialisation -->
<script>
  // Check that service workers are registered
  if ('serviceWorker' in navigator) {
    // Use the window load event to keep the page load performant
    window.addEventListener('load', () => {
      navigator.serviceWorker.register('/service-worker.js');
    });
  }
</script>
<!-- End Workbox initialisation -->
<!-- Notification for service worker updates -->
<script type="module">
  import {Workbox} from 'https://storage.googleapis.com/workbox-cdn/releases/4.2.0/workbox-window.prod.mjs';
  const updateAvailableSnackbar = mdc.snackbar.MDCSnackbar.attachTo(document.getElementById('update-available-snackbar'));
  
  if ('serviceWorker' in navigator) {
    const wb = new Workbox('/service-worker.js');
  
    // Add an event listener to detect when the registered
    // service worker has installed but is waiting to activate.
    wb.addEventListener('waiting', (event) => {
      // `event.wasWaitingBeforeRegister` will be false if this is
      // the first time the updated service worker is waiting.
      // When `event.wasWaitingBeforeRegister` is true, a previously
      // updated same service worker is still waiting.
      // You may want to customize the UI prompt accordingly.
      console.log(event);
      updateAvailableSnackbar.open();
      updateAvailableSnackbar.listen('MDCSnackbar:closed', (event) => {
        if (event.detail && event.detail.reason) {
          if (event.detail.reason == 'action') {
            // Assuming the user accepted the update, set up a listener
            // that will reload the page as soon as the previously waiting
            // service worker has taken control.
            wb.addEventListener('controlling', (event) => {
              window.location.reload();
            });
            // Send a message telling the service worker to skip waiting.
            // This will trigger the `controlling` event handler above.
            // Note: for this to work, you have to add a message
            // listener in your service worker. See below.
            wb.messageSW({type: 'SKIP_WAITING'});
          }
        }
      })
    });
  
    wb.register();
  }
</script>
<!-- End notification for service worker updates -->
</html>
